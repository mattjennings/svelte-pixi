# Breaking changes

## Pixi v8

- In Pixi v8 Application and Renderer are now initialiazed asynchronously. The Application and Renderer components are affected in the following ways:

  - Application will call `init()` on the `instance` prop automatically. This can be disabled with `autoInit={false}`.
  - Application renders a `loading` slot while the initialization is in progress. This should be fast enough to not need to use it, but it's there if needed.
  - Application emits an `init` event with `{ detail: { instance } }` when the initialization is complete. Use this to know when the instance is ready, as the bound `instance` will be set before initialization is complete.

  - Renderer will call `autoDetectRenderer()` to set get the renderer if `instance` is not provided. This is an async call and the `loading` slot will be rendered while it awaits, and `instance` will not be bound until it finishes. If `instance` is provided, it will be ready to use immediately.
  - Like Application, Renderer emits an `init` event with `{ detail: { instance } }` when the autoDetectRenderer has complete. But you can also just bind to the `instance` prop as before.

- Textures _must_ be loaded in AssetsLoader before use

- pluginName gone? https://github.com/pixijs/pixijs/issues/10311

- reducing bundle size method changed

- PerspectiveMesh component

## Components

- Application

  - props
    - useContextAlpha removed, use premultipliedAlpha and backgroundAlpha instead.
    - forceCanvas removed
    - autoDensity, resolution, antialias, backgroundAlpha, backgroundColor, height, width, preserveDrawingBuffer no longer have default values. They will now fallback to Pixi's default values to stay consistent with current Pixi versions. To maintain the previous behavior, set these values explicitly.
      ```svelte
      <Application
        autoDensity
        antialias
        resolution={1}
        backgroundAlpha={1}
        backgroundColor={0x000000}
        height={600}
        width={800}
        preserveDrawingBuffer={false}
      />
      ```

- Renderer

  - props
    - useContextAlpha prop removed, use premultipliedAlpha and backgroundAlpha instead.
    - forceCanvas prop removed
    - stage binding removed, use Container as a child instead and bind to its instance.
    - autoDensity, resolution, antialias, backgroundAlpha, backgroundColor, height, width, preserveDrawingBuffer no longer have default values. They will now fallback to Pixi's default values to stay consistent with current Pixi versions. To maintain the previous behavior, set these values explicitly.
      ```svelte
      <Renderer
        autoDensity
        antialias
        resolution={1}
        backgroundAlpha={1}
        backgroundColor={0x000000}
        height={600}
        width={800}
        preserveDrawingBuffer={false}
      />
      ```

- BitmapText

  - props
    - fontName -> fontFamily
    - maxWidth -> worldWrapWidth
    - tint -> fill

- Container

  - props
    - name deprecated, use `label` instead. name will set label on instance.
    - isMask removed
    - isSprite removed
    - cacheAsBitmapMultisample removed
    - cacheAsBitmapResolution removed
    - cacheAsBitmap deprecated, use cacheAsTexture instead
    - transform removed - replaced by groupTransform, localTransform, and worldTransform and are all read-only.

- Mash

  - props
    - drawMode removed

- NineSlicePlane -> NineSliceSprite

  - props
    - geometry removed
    - state removed
    - drawMode removed

- ParticleContainer
  Overhauled in Pixi v8

  - props
    - maxSize removed
    - batchSize removed
    - autoResize removed
    - properties removed

- SimplePlane -> MeshPlane

  - props
    - drawMode removed
    - geometry removed, use verticesX and verticesY instead

- SimpleRope -> MeshRope

  - props
    - drawMode removed

- TilingSprite
  - props - uvMatrix removed

TODO:
evaluate new props for all components
evaluate if Application/Renderer initialization is handled properly

## Svelte 5

- if using Svelte 4 syntax, Graphics' `draw` function must be declared as a reactive variable or else the function
  will not be reactive

```svelte
<script>
  import { Graphics } from 'svelte-pixi'

  $: draw = (g) => {
    console.log(someReactiveVariable)
  }
</script>

<Graphics {draw} />

<!-- this will no longer be reactive -->
<Graphics
  draw={(g) => {
    console.log(someReactiveVariable)
  }}
/>
```
