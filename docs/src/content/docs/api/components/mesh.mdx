---
title: Mesh
---

import SvelteTabs from '$lib/components/SvelteTabs.astro'
import ComponentAPI from '$lib/components/ComponentAPI.astro'
import ComponentDescription from '$lib/components/svelte-5/ComponentDescription.astro'

Renders a PIXI.Mesh.

<ComponentDescription
  name="Mesh"
  source="https://pixijs.download/dev/docs/scene.Mesh.html"
/>

## Type-Safety Limitation with Subclasses

:::caution[Important: Using Subclasses]
If you are extending `PIXI.Mesh` with your own subclass, you **MUST** provide the `instance` prop with your custom instance.

Due to TypeScript's limitations with generic types, if you don't provide an instance, a base `PIXI.Mesh` will be created and unsafely cast to your subclass type. This will cause **runtime errors** when trying to access subclass-specific properties or methods.

**Correct Usage with Subclasses:**

```typescript
class MyMesh extends PIXI.Mesh {
  myCustomMethod() { ... }
}

const mesh = new MyMesh(geometry, shader)
<Mesh instance={mesh} />
```

This limitation is documented in [issue #49](https://github.com/mattjennings/svelte-pixi/issues/49). When using the base `PIXI.Mesh` type (the default), this is not a concern.
:::

## Usage

<SvelteTabs>
  <div slot="svelte-5">
    ```svelte live props={{ assets: ['/assets/bg_mesh.jpg']}}
    <script>
      import { Mesh, tick } from 'svelte-pixi'
      import * as PIXI from 'pixi.js'

      let rotation = tick((t, prev = 0) => prev + 0.01 * t.deltaTime)

      const geometry = new PIXI.Geometry({
        attributes: {
          aPosition: [
            // x, y
            -100, -100,
            100, -100,
            100,  100,
            -100,  100,
          ],
          aUV: [
            // u, v
            0, 0,
            1, 0,
            1, 1,
            0, 1,
          ],
        }
      })

      const vertex = `
    in vec2 aPosition;
    in vec2 aUV;

    out vec2 vUV;

    uniform mat3 uProjectionMatrix;
    uniform mat3 uWorldTransformMatrix;

    uniform mat3 uTransformMatrix;


    void main() {

        mat3 mvp = uProjectionMatrix * uWorldTransformMatrix * uTransformMatrix;
        gl_Position = vec4((mvp * vec3(aPosition, 1.0)).xy, 0.0, 1.0);

        vUV = aUV;
    }`

      const fragment = `
    in vec2 vUV;

    uniform sampler2D uTexture;

    void main() {
        gl_FragColor = texture2D(uTexture, vUV);
    }`

      const glProgram = PIXI.GlProgram.from({
          vertex,
          fragment,
      });


      const shader = new PIXI.Shader({
        glProgram,
        resources: {
            // make sure texture is loaded!
            uTexture: PIXI.Texture.from('/assets/bg_mesh.jpg').source,
            uTime: 0,
        },
      })
    </script>

    <Mesh
      x={360}
      y={200}
      anchor={0.5}
      scale={2}
      rotation={$rotation}
      {geometry}
      {shader}
    />
    ```

  </div>
  <div slot="svelte-4">
    ```svelte live props={{ assets: ['/assets/bg_mesh.jpg']}}
    <script>
      import { Mesh, tick } from 'svelte-pixi/svelte-4'
      import * as PIXI from 'pixi.js'

      let rotation = tick((t, prev = 0) => prev + 0.01 * t.deltaTime)

      const geometry = new PIXI.Geometry({
        attributes: {
          aPosition: [
            // x, y
            -100, -100,
            100, -100,
            100,  100,
            -100,  100,
          ],
          aUV: [
            // u, v
            0, 0,
            1, 0,
            1, 1,
            0, 1,
          ],
        }
      })

      const vertex = `
    in vec2 aPosition;
    in vec2 aUV;

    out vec2 vUV;

    uniform mat3 uProjectionMatrix;
    uniform mat3 uWorldTransformMatrix;

    uniform mat3 uTransformMatrix;


    void main() {

        mat3 mvp = uProjectionMatrix * uWorldTransformMatrix * uTransformMatrix;
        gl_Position = vec4((mvp * vec3(aPosition, 1.0)).xy, 0.0, 1.0);

        vUV = aUV;
    }`

      const fragment = `
    in vec2 vUV;

    uniform sampler2D uTexture;

    void main() {
        gl_FragColor = texture2D(uTexture, vUV);
    }`

      const glProgram = PIXI.GlProgram.from({
          vertex,
          fragment,
      });


      const shader = new PIXI.Shader({
        glProgram,
        resources: {
            // make sure texture is loaded!
            uTexture: PIXI.Texture.from('/assets/bg_mesh.jpg').source,
            uTime: 0,
        },
      })

    </script>

    <Mesh
      x={360}
      y={200}
      anchor={0.5}
      scale={2}
      rotation={$rotation}
      {geometry}
      {shader}
    />
    ```

  </div>
</SvelteTabs>

## API

<ComponentAPI component="Mesh.svelte" />
