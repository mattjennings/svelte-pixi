---
title: ParticleContainer
pixi: https://pixijs.download/release/docs/PIXI.ParticleContainer.html
---

import ComponentAPI from '$lib/components/ComponentAPI.astro'

A really fast version of the Container built solely for speed, so use when you need a lot of sprites or particles.

The tradeoff of the ParticleContainer is that most advanced functionality will not work. ParticleContainer implements the basic object transform (position, scale, rotation) and some advanced functionality like tint.

Other more advanced functionality like masking, filters, etc will not work on sprites in this batch.

## Usage

Note: when working with thousands of components, it is **much** more performant to create & update the Pixi 
instances directly instead of through components. See [Optimizing Performance](/guides/optimizing-performance) guide.

```svelte live assets=["/assets/star.png"]
<script>
  import * as PIXI from 'pixi.js'
  import { Sprite, onTick, ParticleContainer, getRenderer} from 'svelte-pixi'
  import { onMount } from 'svelte'

  const { renderer } = getRenderer()

  const width = renderer.width / 2
  const height = renderer.height / 2
  const speed = 0.025
  const fov = 20
  const starSize = 0.05

  let container = $state(null)
  let cameraZ = $state(0)
  let amount = $state(5000)
  let stars = []

  // create stars for amount value
  $effect(() => {    
    if (container) {      
      stars = new Array(amount).fill(null).map(() => {        
        const star = new PIXI.Sprite(PIXI.Texture.from('/assets/star.png'))

        const deg = Math.random() * Math.PI * 2
        const distance = Math.random() * 50 + 1

        star.initX = Math.cos(deg) * distance
        star.initY = Math.sin(deg) * distance
        star.initZ = Math.random() * 1000 + 750

        star.x = star.initX
        star.y = star.initY
        star.z = star.initZ

        return star
      })

      if (stars.length) {
        container.addChild(...stars)
      }
    }

    // destroy stars
    return () => {
      stars.forEach((star) => star.destroy())
    }
  })

  function updateStar(star) {
    const z = star.z - cameraZ % 2000
    const distance = Math.max(0, (2000 - z) / 2000)

    star.scale.set(distance * starSize)
    
    star.x = star.initX * (fov / z) * width
    star.y = star.initY * (fov / z) * width
  }

  // move the camera forward
  onTick((delta) => {
    cameraZ += delta * 10 * speed

    stars.forEach(updateStar)
  })

</script>

<ParticleContainer
  bind:instance={container}
  autoResize
  properties={{
    scale: true,
    position: true,
    rotation: true,
  }}
/>

<label class="flex flex-col !mt-0">
  <span class="text-white text-center">Amount: {amount}</span>
  <input type="range" min="0" max="10000" step="500" bind:value={amount} />
</label>

```

## API

<ComponentAPI component="ParticleContainer.svelte" />
